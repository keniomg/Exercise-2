using System;
using System.Linq;

namespace lessons
{
    class program
    {
        static void Main()
        {
            const string ExitCommand = "exit";
            const string ExchangeEnterCommand = "1";
            const string ExchangeRateCommand = "2";
            const string BalanceInfoCommand = "3";
            const string ConvertRubToUsdCommand = "1";
            const string ConvertRubToEuroCommand = "2";
            const string ConvertUsdToRubCommand = "3";
            const string ConvertUsdToEuroCommand = "4";
            const string ConvertEuroToRubCommand = "5";
            const string ConvertEuroToUsdCommand = "6";

            bool isWorking = true;
            bool rubleBalanceIsInputed = false;
            bool dollarBalanceIsInputed = false;
            bool euroBalanceIsInputed = false;
            string exchangeEnter = "Обмен валюты";
            string exchangeRate = "Узнать курс обмена";
            string balanceInfo = "Узнать баланс";
            string exitMessage = $"Для выхода из программы введите '{ExitCommand}' в любой момент";
            float fullPercent = 100f;
            float comissionPercent = 7.3f;
            float exchangePercent = (fullPercent - comissionPercent) / 100;
            float dollar = 100.65f;
            float euro = 110.13f;
            float ruble = 1f;
            string userCommand = "0";
            string rubleToExchange = null;
            string dollarToExchange = null;
            string euroToExchange = null;
            float rubleBalance = 0;
            float dollarBalance = 0;
            float euroBalance = 0;
            string currencyInput = null;
            float dollarToRuble = dollar / ruble * exchangePercent;
            float dollarToEuro = dollar / euro * exchangePercent;
            float euroToRuble = euro / ruble * exchangePercent;
            float euroToDollar = euro / dollar * exchangePercent;
            float rubleToDollar = ruble / dollar * exchangePercent;
            float rubleToEuro = ruble / euro * exchangePercent;
            Console.WriteLine($"Приветствуем вас в нашем валютообменнике.\n{exitMessage}\n\nЧтобы продолжить, нажмите 'Enter'...");
            userCommand = Console.ReadLine();
            Console.Clear();

            if (userCommand == ExitCommand)
            {
                isWorking = false;
            }

            while (currencyInput != ExitCommand && rubleBalanceIsInputed == false)
            {
                Console.WriteLine("Сколько у вас рублей?:\n");
                currencyInput = Console.ReadLine();
                Console.Clear();

                if (float.TryParse(currencyInput, out rubleBalance) == true)
                {
                    rubleBalanceIsInputed = true;
                }
            }

            while (currencyInput != ExitCommand && dollarBalanceIsInputed == false)
            {
                Console.WriteLine("Сколько у вас долларов?:\n");
                currencyInput = Console.ReadLine();
                Console.Clear();

                if (float.TryParse(currencyInput, out dollarBalance) == true)
                {
                    dollarBalanceIsInputed = true;
                }   
            }

            while (currencyInput != ExitCommand && euroBalanceIsInputed == false)
            {
                Console.WriteLine("Сколько у вас евро?:\n");
                currencyInput = Console.ReadLine();
                Console.Clear();

                if (float.TryParse(currencyInput, out euroBalance) == true)
                {
                    euroBalanceIsInputed = true;
                }
                             
            }

            if (currencyInput == ExitCommand)
            {
                isWorking = false;
            }

            while (isWorking)
            {
                Console.Clear();
                Console.WriteLine($"Вы можете выполнить одну из следующих операций:\n\n{ExchangeEnterCommand} - {exchangeEnter}\n" +
                    $"{ExchangeRateCommand} - {exchangeRate}\n{BalanceInfoCommand} - {balanceInfo}\n");
                userCommand = Console.ReadLine();
                Console.Clear();

                switch (userCommand)
                {
                    case ExchangeEnterCommand:
                        Console.WriteLine($"Какой обмен вы хотите совершить?\n{ConvertRubToUsdCommand} - рубли на доллары\n" +
                        $"{ConvertRubToEuroCommand} - рубли на евро\n{ConvertUsdToRubCommand} - доллары на рубли\n{ConvertUsdToEuroCommand}" +
                        $" - доллары на евро\n{ConvertEuroToRubCommand} - евро на рубли\n{ConvertEuroToUsdCommand} - евро на доллары\n");
                        userCommand = Console.ReadLine();

                        switch (userCommand)
                        {
                            case ConvertRubToUsdCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько рублей вы хотите обменять на доллары?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    rubleToExchange = userCommand;
                                    rubleBalance -= Convert.ToSingle(rubleToExchange);
                                    dollarBalance += Convert.ToSingle(rubleToExchange) * rubleToDollar;
                                }

                                break;

                            case ConvertRubToEuroCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько рублей вы хотите обменять на евро?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    rubleToExchange = userCommand;
                                    rubleBalance -= Convert.ToSingle(rubleToExchange);
                                    euroBalance += (Convert.ToSingle(rubleToExchange) * rubleToEuro);
                                }

                                break;

                            case ConvertUsdToRubCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько долларов вы хотите обменять на рубли?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    dollarToExchange = userCommand;
                                    dollarBalance -= Convert.ToSingle(dollarToExchange);
                                    rubleBalance += (Convert.ToSingle(dollarToExchange) * dollarToRuble);
                                }

                                break;

                            case ConvertUsdToEuroCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько долларов вы хотите обменять на евро?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    dollarToExchange = userCommand;
                                    dollarBalance -= Convert.ToSingle(dollarToExchange);
                                    euroBalance += (Convert.ToSingle(dollarToExchange) * dollarToEuro);
                                }

                                break;

                            case ConvertEuroToRubCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько евро вы хотите обменять на рубли?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    euroToExchange = userCommand;
                                    euroBalance -= Convert.ToSingle(euroToExchange);
                                    rubleBalance += (Convert.ToSingle(euroToExchange) * euroToRuble);
                                }

                                break;

                            case ConvertEuroToUsdCommand:
                                Console.Clear();
                                Console.WriteLine("Сколько евро вы хотите обменять на рубли?:\n");
                                userCommand = Console.ReadLine();

                                if (float.TryParse(userCommand, out _) == true)
                                {
                                    euroToExchange = userCommand;
                                    euroBalance -= Convert.ToSingle(euroToExchange);
                                    dollarBalance += (Convert.ToSingle(euroToExchange) * euroToDollar);
                                }

                                break;

                            case ExitCommand:
                                Console.WriteLine();
                                isWorking = false;
                                break;

                            default:
                                Console.WriteLine("Введена неправильная команда. Чтобы продолжить, нажмите любую клавишу...");
                                Console.ReadKey();
                                break;
                        }

                        if (userCommand == ExitCommand)
                        {
                            isWorking = false;
                        }

                        if (isWorking)
                        {
                            Console.Clear();
                            Console.WriteLine($"Теперь в вашем кошельке:\n \nрублей: {rubleBalance} \nдолларов: {dollarBalance}\nевро: {euroBalance}");
                        }

                        break;

                    case ExchangeRateCommand:
                    Console.WriteLine($"Текущий курс обмена:\n1 рубль = \nдолларов: {rubleToDollar}\nевро: {rubleToEuro}\n" +
                        $"\n1 доллар = \nрублей: {dollarToRuble}\nевро: {dollarToEuro}\n\n1 евро = \nдолларов: {euroToDollar}" +
                        $"\nрублей: {euroToRuble}");
                        break;

                    case BalanceInfoCommand:
                        Console.WriteLine($"В вашем кошельке:\n \nрублей: {rubleBalance} \nдолларов: {dollarBalance}\nевро: {euroBalance}");
                        break;

                    case ExitCommand:
                        isWorking = false;
                        break;

                    default:
                        break;
                }

                if (isWorking == true)
                {
                    Console.WriteLine("Нажмите любую клавишу, чтобы продолжить...");
                    Console.ReadKey();
                    Console.Clear();
                }
            }
        }
    }
}
